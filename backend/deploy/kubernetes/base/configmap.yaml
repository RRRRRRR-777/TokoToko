# TekuToko API ConfigMap
# 環境変数を一元管理（config.goと完全対応）
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  labels:
    app: tekutoko-api
data:
  # 環境識別子（config.go: ENVIRONMENT）
  ENVIRONMENT: "production"  # development, staging, productionのいずれか

  # サーバー設定（config.go: PORT）
  PORT: "8080"

  # データベース接続設定（Cloud SQL Proxy経由）
  # config.go: DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_SSLMODE
  DB_HOST: "localhost"  # Cloud SQL Proxyを使用するため、localhost固定
  DB_PORT: "5432"
  DB_NAME: "tekutoko_production"  # 環境ごとに変更: tekutoko_dev, tekutoko_staging, tekutoko_production
  DB_USER: "tekutoko"
  DB_SSLMODE: "disable"  # Cloud SQL Proxy経由なのでdisable（Proxy側でSSL/TLS暗号化）

  # Firebase設定（config.go: FIREBASE_PROJECT_ID）
  # FIREBASE_CREDENTIALS_PATH は Secret で管理
  FIREBASE_PROJECT_ID: "tokotoko-ea308"

  # ログ設定（config.go: LOG_LEVEL, LOG_FORMAT）
  LOG_LEVEL: "info"     # debug, info, warn, error
  LOG_FORMAT: "json"    # json or text

  # アプリケーション固有設定（config.goにはないが、将来の拡張用）
  MAX_UPLOAD_SIZE: "10485760"       # 10MB（写真アップロード上限）
  CORS_ALLOWED_ORIGINS: "*"         # TODO: 本番では具体的なオリジンを指定
  SERVER_READ_TIMEOUT: "30s"
  SERVER_WRITE_TIMEOUT: "30s"
