apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: tekutoko-secrets
  namespace: default
spec:
  provider: gcp
  parameters:
    # GCP Secret Managerから取得するシークレット
    secrets: |
      - resourceName: "projects/PROJECT_ID/secrets/db-password/versions/latest"
        path: "db_password"
      - resourceName: "projects/PROJECT_ID/secrets/firebase-service-account/versions/latest"
        path: "firebase_service_account_json"

  # Kubernetes Secretとして同期（オプション）
  secretObjects:
  - secretName: gcp-secret-db-password
    type: Opaque
    data:
    - objectName: db_password
      key: password

  - secretName: gcp-secret-firebase
    type: Opaque
    data:
    - objectName: firebase_service_account_json
      key: credentials.json
