apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: tekutoko-secrets
  namespace: default
spec:
  provider: gke
  parameters:
    # GCP Secret Manager から取得するシークレット（GKE managed CSI driver 用）
    secrets: |
      - resourceName: "projects/tokotoko-ea308/secrets/db-password/versions/latest"
        path: "db_password"
      - resourceName: "projects/tokotoko-ea308/secrets/firebase-service-account/versions/latest"
        path: "firebase_service_account_json"

  # Kubernetes Secretとして同期（Podが参照するapp-secretを作成）
  secretObjects:
  - secretName: app-secret
    type: Opaque
    data:
    - objectName: db_password
      key: db_password
    - objectName: firebase_service_account_json
      key: firebase_service_account_json
